<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background: #0a0a1a;
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            background: linear-gradient(90deg, #1a1a3a, #2a2a5a);
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 28px;
            font-weight: bold;
            color: #64c8ff;
            text-shadow: 0 0 10px #64c8ff;
        }
        
        .subtitle {
            color: #a0a0ff;
            margin-top: 5px;
        }
        
        .search {
            width: 100%;
            padding: 12px;
            background: #1a1a3a;
            border: 2px solid #64c8ff;
            border-radius: 10px;
            color: white;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .games-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .game-card {
            background: linear-gradient(135deg, #1a1a3a, #2a2a5a);
            border-radius: 10px;
            padding: 15px;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .game-card:hover {
            border-color: #64c8ff;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(100, 200, 255, 0.3);
        }
        
        .game-logo {
            width: 100%;
            height: 120px;
            background: #2a2a4a;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #64c8ff;
            margin-bottom: 10px;
        }
        
        .game-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .execute-btn {
            width: 100%;
            padding: 8px;
            background: linear-gradient(90deg, #64c8ff, #8a2be2);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .category {
            color: #8888ff;
            font-size: 12px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="title">DANIEL & MARY HUB</div>
        <div class="subtitle">v2.0 - Interface Web</div>
    </div>
    
    <input type="text" class="search" id="searchBox" placeholder="ðŸ” Buscar jogos...">
    
    <div class="games-container" id="gamesContainer">
        <!-- Os jogos serÃ£o carregados aqui -->
    </div>
    
    <script>
        let gamesData = [];
        
        // FunÃ§Ã£o para inicializar com dados do Lua
        window.initializeHub = function(data) {
            console.log("Recebendo dados do Roblox:", data);
            gamesData = data || [];
            renderGames();
        };
        
        // FunÃ§Ã£o para renderizar jogos
        function renderGames(filter = "") {
            const container = document.getElementById('gamesContainer');
            container.innerHTML = '';
            
            let allGames = [];
            gamesData.forEach(category => {
                if (category.jogos) {
                    category.jogos.forEach(game => {
                        game.categoria = category.categoria;
                        allGames.push(game);
                    });
                }
            });
            
            // Filtra os jogos
            if (filter) {
                allGames = allGames.filter(game => 
                    game.titulo.toLowerCase().includes(filter.toLowerCase()) ||
                    (game.descricao && game.descricao.toLowerCase().includes(filter.toLowerCase()))
                );
            }
            
            // Renderiza cada jogo
            allGames.forEach(game => {
                const card = document.createElement('div');
                card.className = 'game-card';
                card.innerHTML = `
                    <div class="category">${game.categoria || 'Geral'}</div>
                    <div class="game-logo" id="logo-${game.titulo}">
                        ${game.titulo ? game.titulo.substring(0, 3).toUpperCase() : 'DMH'}
                    </div>
                    <div class="game-title">${game.titulo || 'Sem TÃ­tulo'}</div>
                    <button class="execute-btn" onclick="executeScript('${game.scriptUrl || ''}', '${game.key || ''}')">
                        ðŸš€ Executar
                    </button>
                `;
                
                // Tenta carregar a logo
                if (game.logoUrl) {
                    const logoDiv = card.querySelector(`#logo-${game.titulo}`);
                    const img = new Image();
                    img.onload = function() {
                        logoDiv.innerHTML = '';
                        logoDiv.appendChild(img);
                        logoDiv.style.background = 'transparent';
                    };
                    img.src = game.logoUrl;
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';
                    img.style.borderRadius = '8px';
                }
                
                container.appendChild(card);
            });
            
            // Evento de clique duplo no card
            document.querySelectorAll('.game-card').forEach(card => {
                card.ondblclick = function() {
                    const title = this.querySelector('.game-title').textContent;
                    const game = allGames.find(g => g.titulo === title);
                    if (game && game.scriptUrl) {
                        executeScript(game.scriptUrl, game.key);
                    }
                };
            });
        }
        
        // FunÃ§Ã£o para executar script
        function executeScript(url, key) {
            console.log("Executando script:", url, "Key:", key);
            alert(`Script executado!\nURL: ${url}\nKey: ${key || 'Nenhuma'}`);
            
            // Se estiver no contexto do Roblox, envia para o Lua
            if (typeof RobloxBridge !== 'undefined') {
                RobloxBridge.executeScript(url, key);
            }
        }
        
        // Evento de busca
        document.getElementById('searchBox').addEventListener('input', function(e) {
            renderGames(e.target.value);
        });
        
        // SimulaÃ§Ã£o de dados se nÃ£o receber do Lua
        setTimeout(() => {
            if (gamesData.length === 0) {
                console.log("Usando dados simulados...");
                window.initializeHub([{
                    categoria: "Simulado",
                    jogos: [
                        {
                            titulo: "Exemplo Game",
                            descricao: "Jogo de exemplo",
                            logoUrl: "",
                            scriptUrl: "https://exemplo.com/script.lua",
                            key: "chave123"
                        }
                    ]
                }]);
            }
        }, 3000);
        
        // Bridge para comunicaÃ§Ã£o com Lua
        window.RobloxBridge = {
            executeScript: function(url, key) {
                console.log("Bridge: Executando script", url, key);
            }
        };
    </script>
</body>
</html>